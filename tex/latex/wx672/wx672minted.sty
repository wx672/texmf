% for typesetting standalone source code blocks
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{wx672minted}

\RequirePackage{ifxetex} % This class is for XeTeX only

\RequirePackage{minted}%[newfloat=true]
%\usemintedstyle{bw}

\RequirePackage{caption} % \captionsetup

\renewcommand{\theFancyVerbLine}{
  \textcolor{lightgray}{\scriptsize \arabic{FancyVerbLine}}}

\setmintedinline{breaklines=true,fontsize=\small,autogobble=false}

\setminted{baselinestretch=1,fontsize=\small,xleftmargin=1em,breaklines=true,
  linenos,numbersep=1pt,%
  frame=leftline,framesep=5pt,%
  rulecolor=\color{lightgray},autogobble=true}

\newminted{c}{}% \ccode{}
\newminted{shell}{}% \shellcode{}
\newminted{latex}{}
\newminted{bibtex}{}
\newminted{gas}{}
\newminted{nasm}{}
\newminted{python}{}
\newminted{pascal}{}

\newmintedfile{c}{baselinestretch=1,linenos,breaklines,autogobble}%\cfile{filepath}
\newmintedfile[mkfile]{makefile}{baselinestretch=1,linenos,breaklines,autogobble}%\mkfile{filepath}
\newmintedfile{nasm}{baselinestretch=1,linenos,breaklines,autogobble}%\nasmfile{filepath}
\newmintedfile[pasfile]{pascal}{baselinestretch=1,linenos,breaklines,autogobble}%\pasfile{filepath}
\newmintedfile[pyfile]{python}{baselinestretch=1,linenos,breaklines,autogobble}%\pyfile{filepath}
\newmintedfile{shell}{baselinestretch=1,linenos,breaklines,autogobble}%\shellfile{filepath}
\newmintedfile[shfile]{shell}{baselinestretch=1,linenos,breaklines,autogobble}%\shfile{filepath}

% code listing across pages
\newenvironment{longlisting}{\captionsetup{type=listing}}{}

\newenvironment{codeblock}[1] % e.g. \begin{codeblock}{.7} ... \end{codeblock}
{\begin{center}\begin{minipage}{#1\textwidth}\begin{singlespace}}
{\end{singlespace}\end{minipage}\end{center}}

% no good. 
%\RecustomVerbatimEnvironment{Verbatim}{BVerbatim}{} % to make centering minted works

