% for typesetting standalone source code blocks
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{wx672minted}

\RequirePackage{fontspec}
\newfontfamily\firacode{FiraCode Nerd Font}[NFSSFamily=FiraCode]
\RequirePackage[cache=false]{minted}%[newfloat=true]
%\usemintedstyle{bw}

\RequirePackage{caption} % \captionsetup

\renewcommand{\theFancyVerbLine}{
  \textcolor{lightgray}{\scriptsize \arabic{FancyVerbLine}}}

\setmintedinline{breaklines=true,fontsize=\small,autogobble=false,fontfamily=FiraCode}

\setminted{baselinestretch=1,fontsize=\small,xleftmargin=1em,breaklines=true,%
  fontfamily=FiraCode,%
  linenos,numbersep=1pt,%
  frame=leftline,framesep=5pt,%
  rulecolor=\color{lightgray},autogobble=true}

\newminted{c}{}% \ccode{}
\newminted{sh}{}% \shcode{}
\newminted{shell}{}% \shellcode{}
\newminted{latex}{}
\newminted{bibtex}{}
\newminted{gas}{}
\newminted{nasm}{}
\newminted{python}{}
\newminted{pascal}{}
\newminted{makefile}{}

\newmintedfile[cfile]{c}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\cfile{filepath}
\newmintedfile[mkfile]{makefile}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\mkfile{filepath}
\newmintedfile{nasm}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\nasmfile{filepath}
\newmintedfile[pasfile]{pascal}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\pasfile{filepath}
\newmintedfile[pyfile]{python}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\pyfile{filepath}
\newmintedfile{shell}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\shellfile{filepath}
\newmintedfile[shfile]{shell}{baselinestretch=1,linenos,breaklines,autogobble,fontfamily=FiraCode}%\shfile{filepath}

% code listing across pages
\newenvironment{longlisting}{\captionsetup{type=listing}}{}

\newenvironment{codeblock}[1] % e.g. \begin{codeblock}{.7} ... \end{codeblock}
{\begin{center}\begin{minipage}{#1\textwidth}\begin{singlespace}}
{\end{singlespace}\end{minipage}\end{center}}

% no good. 
%\RecustomVerbatimEnvironment{Verbatim}{BVerbatim}{} % to make centering minted works

