% è¥¿å—æ—ä¸šå¤§å­¦å…¨æ—¥åˆ¶æœ¬ç§‘æ•™æé€‰ç”¨å®¡æ‰¹è¡¨ï¼ˆ2023ï¼‰
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{swfutextbook}

\RequirePackage{pgfkeys}

\pgfkeys{
  School/.store     in = \SWFU@School,    %æ•™å­¦å•ä½
  Course/.store     in = \SWFU@Course,    %è¯¾ç¨‹åç§°
  CourseID/.store   in = \SWFU@CourseID,  %è¯¾ç¨‹å·
  Degree/.store     in = \SWFU@Degree,    %å¼€è¯¾å±‚æ¬¡ï¼ˆæœ¬ç§‘ï¼‰
  Teacher/.store    in = \SWFU@Teacher,   %è¯¾ç¨‹è´Ÿè´£äºº
  TeacherSig/.store in = \SWFU@TeacherSig,%è¯¾ç¨‹è´Ÿè´£äººç­¾å­—
  TeacherSigYear/.store  in = \SWFU@TeacherSigYear, %
  TeacherSigMonth/.store in = \SWFU@TeacherSigMonth,%
  TeacherSigDay/.store   in = \SWFU@TeacherSigDay,  %
  Dept/.store in = \SWFU@Dept,      %è¯¾ç¨‹è´Ÿè´£æ•™ç ”å®¤ï¼ˆç³»ï¼‰
  DeptSig/.store in = \SWFU@DeptSig,%æ•™ç ”å®¤ï¼ˆç³»ï¼‰ä¸»ä»»ç­¾å­—
  DeptSigYear/.store  in = \SWFU@DeptSigYear, %
  DeptSigMonth/.store in = \SWFU@DeptSigMonth,%
  DeptSigDay/.store   in = \SWFU@DeptSigDay,  %
  Grade/.store   in = \SWFU@Grade,  %æˆè¯¾å¹´çº§
  Subject/.store in = \SWFU@Subject,% æˆè¯¾ä¸“ä¸š
  Book/.store in = \SWFU@Book,%æ•™æåç§°
  ISBN/.store in = \SWFU@ISBN,%ä¹¦å·ï¼ˆISBNï¼‰
  BookAuthor/.store  in = \SWFU@BookAuthor, %æ•™æä½œè€…
  Publisher/.store   in = \SWFU@Publisher,  %å‡ºç‰ˆå•ä½
  PublishDate/.store in = \SWFU@PublishDate,%å‡ºç‰ˆæ—¶é—´ï¼ˆxå¹´xæœˆï¼‰
  DBInfo/.store in = \SWFU@DBInfo,%å…¥å­¦æ ¡æ•™æé€‰ç”¨æ•°æ®åº“æƒ…å†µï¼ˆ1. é¦–æ¬¡ç”³
  %                                è¯·å…¥åº“ï¼›2. å·²å…¥åº“ï¼Œå…¥åº“æ—¶é—´___å¹´ï¼‰
  DBYear/.store in = \SWFU@DBYear,%å…¥åº“æ—¶é—´___å¹´
  BookType/.store in = \SWFU@BookType,%åª’è´¨ç±»å‹ï¼ˆ1. çº¸è´¨æ•™æï¼›2. æ•°å­—
  %                                    æ•™æï¼›3. æ–°å½¢æ€æ•™æï¼‰
  BookFrom/.store in = \SWFU@BookFrom,%æ•™æå‡ºå¤„ï¼ˆ1. å¢ƒå†…æ•™æï¼›2. å¢ƒå¤–
  %                                    åŸç‰ˆï¼›3. å¢ƒå†…å½±å°æˆ–ç¿»è¯‘å‡ºç‰ˆï¼‰
  BookCls/.store in = \SWFU@BookCls,%æ•™æç±»å‹ï¼ˆ1. â€œé©¬å·¥ç¨‹â€ï¼›2. è§„åˆ’æ•™
  %                                  æï¼›3. ç²¾å“ã€ä¼˜ç§€æ•™æï¼›4. æ™®é€šæ•™æï¼›
  %                                  5. å…¶å®ƒ______ï¼›6. æ— ã€‚ï¼‰
  BookWhy/.store in = \SWFU@BookWhy,%é¦–æ¬¡é€‰ç”¨ä¾æ®/å†æ¬¡é€‰ç”¨ä½¿ç”¨æ•ˆæœè¯„ä»·æ„è§
  Default/.style = {%
    School = {å¤§æ•°æ®ä¸æ™ºèƒ½å·¥ç¨‹å­¦é™¢},%æ•™å­¦å•ä½
    Course   =,%è¯¾ç¨‹åç§°
    CourseID =,%è¯¾ç¨‹å·
    Degree   = {æœ¬ç§‘},  %å¼€è¯¾å±‚æ¬¡
    Teacher  = {ç‹æ™“æ—},%è¯¾ç¨‹è´Ÿè´£äºº
    TeacherSig =,      %è¯¾ç¨‹è´Ÿè´£äººç­¾å­—
    TeacherSigYear  ={{\hwfamily\the\year}}, %
    TeacherSigMonth ={{\hwfamily\the\month}},%
    TeacherSigDay   ={{\hwfamily\the\day}},  %
    Dept ={è®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹ç³»},% è¯¾ç¨‹è´Ÿè´£æ•™ç ”å®¤ï¼ˆç³»ï¼‰
    DeptSig =,%æ•™ç ”å®¤ï¼ˆç³»ï¼‰ä¸»ä»»ç­¾å­—
    DeptSigYear  ={{\hwfamily\the\year}}, %
    DeptSigMonth ={{\hwfamily\the\month}},%
    DeptSigDay   ={{\hwfamily\the\day}},  %
    Grade  =,               %æˆè¯¾å¹´çº§
    Subject={è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯},%æˆè¯¾ä¸“ä¸š
    Book=,%æ•™æåç§°
    ISBN=,%ä¹¦å·ï¼ˆISBNï¼‰
    BookAuthor=,%æ•™æä½œè€…
    Publisher =,%å‡ºç‰ˆå•ä½
    PublishDate=,%å‡ºç‰ˆæ—¶é—´ï¼ˆxå¹´xæœˆï¼‰
    DBInfo=,%å…¥å­¦æ ¡æ•™æé€‰ç”¨æ•°æ®åº“æƒ…å†µï¼ˆ1. é¦–æ¬¡ç”³è¯·å…¥åº“ï¼›2. å·²å…¥åº“ï¼Œå…¥åº“æ—¶é—´___å¹´ï¼‰
    DBYear={\hspace{3em}},%å…¥åº“æ—¶é—´___å¹´
    BookType={1},%åª’è´¨ç±»å‹ï¼ˆ1. çº¸è´¨æ•™æï¼›2. æ•°å­—æ•™æï¼›3. æ–°å½¢æ€æ•™æï¼‰
    BookFrom={1},%æ•™æå‡ºå¤„ï¼ˆ1. å¢ƒå†…æ•™æï¼›2. å¢ƒå¤–åŸç‰ˆï¼›3. å¢ƒå†…å½±å°æˆ–ç¿»è¯‘å‡ºç‰ˆï¼‰
    BookCls={3},%æ•™æç±»å‹ï¼ˆ1. â€œé©¬å·¥ç¨‹â€ï¼›2. è§„åˆ’æ•™æï¼›
    %            3. ç²¾å“ã€ä¼˜ç§€æ•™æï¼›4. æ™®é€šæ•™æï¼› 5. å…¶å®ƒ______ï¼›6. æ— ã€‚ï¼‰
    BookWhy={è§„åˆ’æ•™æï¼Œä½¿ç”¨æ•ˆæœè‰¯å¥½ã€‚}%é¦–æ¬¡é€‰ç”¨ä¾æ®/å†æ¬¡é€‰ç”¨ä½¿ç”¨æ•ˆæœè¯„ä»·æ„è§
  }}

\newcommand{\swfusetup}[1]{\pgfkeys{#1}}

\LoadClass[12pt]{article}%

\RequirePackage{wx672babel}

\RequirePackage[%showframe,%
a4paper,nomarginpar,%
vmargin=2cm,%
hmargin=2cm,%
]{geometry}

\RequirePackage{tabularray,graphicx,newunicodechar}
\newfontfamily\symbola{Symbola Nerd Font}
\newunicodechar{â˜}{{\symbola â˜}}%ballot box ğŸ—†
\newunicodechar{â˜‘}{{\symbola â˜‘}}%checked box tick ğŸ—¹

\newcommand{\makeform}{%
  \pagestyle{empty}%
  \begin{center}
    \Large\sffamily\bfseries è¥¿å—æ—ä¸šå¤§å­¦å…¨æ—¥åˆ¶æœ¬ç§‘æ•™æé€‰ç”¨å®¡æ‰¹è¡¨
  \end{center}
  æ•™å­¦å•ä½ï¼š{\ttfamily\SWFU@School}\par\noindent
  \begin{tblr}{colspec={Q[3em,c]Q[7em,c]X[c]cQ[6em,c]}, vlines, hlines,%
      rowsep=.25\baselineskip, rows={m}, cells={m},%
      column{3,5}={font=\ttfamily},%
      cell{1}{1}={r=4}{c},%è¯¾ç¨‹ä¿¡æ¯
      cell{4}{3}={c=3}{c},%æˆè¯¾ä¸“ä¸š
    }
    {è¯¾ç¨‹\\ä¿¡æ¯}%
    &è¯¾ç¨‹åç§°&\SWFU@Course&å¼€è¯¾å±‚æ¬¡&\SWFU@Degree\\%
    &è¯¾ç¨‹è´Ÿè´£äºº&\SWFU@Teacher&è¯¾ç¨‹å·&\SWFU@CourseID\\%
    &{è¯¾ç¨‹è´Ÿè´£\\æ•™ç ”å®¤ï¼ˆç³»ï¼‰}&\SWFU@Dept&æˆè¯¾å¹´çº§&\SWFU@Grade\\%
    &æˆè¯¾ä¸“ä¸š&\SWFU@Subject&&\\
  \end{tblr}\\[-1pt]
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
  \begin{tblr}{colspec={Q[3em,c]Q[7em,c]Q[1em,c]X[l]cQ[6em,c]}, vlines, hline{2-Z},%
      rowsep=.25\baselineskip, rows={m}, cells={m},%
      column{3,6}={font=\ttfamily},%
      cell{7}{3}={font=\rmfamily},%
      cell{1}{1}={r=7}{c},%é€‰ç”¨æ•™æä¿¡æ¯
      cell{1}{3}={c=4}{c},%æ•™æåç§°
      cell{2,3}{3}={c=2}{c},%ä¹¦å·ã€å‡ºç‰ˆå•ä½
      cell{4-7}{4}={c=3}{l},%å…¥åº“æƒ…å†µã€åª’è´¨ç±»å‹ã€æ•™æå‡ºå¤„ã€æ•™æç±»å‹
    }
    {é€‰ç”¨\\æ•™æ\\ä¿¡æ¯}%
    &æ•™æåç§°(ç‰ˆæ¬¡)&\SWFU@Book&&&\\
    &ä¹¦å·(ISBN)&\SWFU@ISBN&&æ•™æä½œè€…&\SWFU@BookAuthor\\
    &å‡ºç‰ˆå•ä½&\SWFU@Publisher&&å‡ºç‰ˆæ—¶é—´&\SWFU@PublishDate\\
    &{å…¥å­¦æ ¡æ•™æé€‰\\ç”¨æ•°æ®åº“æƒ…å†µ}&\SWFU@DBInfo&{%
      \makebox[10em][l]{1.\,é¦–æ¬¡ç”³è¯·å…¥å­¦æ ¡æ•™æé€‰ç”¨æ•°æ®åº“}\\%
      \makebox[10em][l]{2.\,å·²å…¥å­¦æ ¡æ•™æé€‰ç”¨æ•°æ®åº“ï¼Œå…¥åº“æ—¶é—´\underline{\SWFU@DBYear}å¹´}}&&\\
    &åª’è´¨ç±»å‹&\SWFU@BookType&{%
      \makebox[10em][l]{1.\,çº¸è´¨æ•™æ\quad 2.\,æ•°å­—æ•™æ\quad 3.\,æ–°å½¢æ€æ•™æ}}&&\\
    &æ•™æå‡ºå¤„&\SWFU@BookFrom&{%
      \makebox[10em][l]{1.\,å¢ƒå†…æ•™æ\quad 2.\,å¢ƒå¤–åŸç‰ˆ\quad 3.\,å¢ƒå†…å½±å°æˆ–ç¿»è¯‘å‡ºç‰ˆ}}&&\\
    &æ•™æç±»å‹&{å\\é¢\\æ‰“\\å‹¾}&{%
      \makebox[10em][l]{1.\:â˜\,â€œé©¬å·¥ç¨‹â€é‡ç‚¹æ•™æåŠå›½å®¶ç»Ÿç¼–æ•™æ}\\%
      \makebox[10em][l]{2.\:â˜‘\,è§„åˆ’æ•™æï¼ˆå›½å®¶çº§ã€çœçº§ï¼‰}\\%
      \makebox[10em][l]{3.\:â˜\,ç²¾å“ã€ä¼˜ç§€æ•™æ(å›½å®¶çº§ã€çœçº§ã€å­¦ä¼šã€è¡Œä¸šç­‰)}\\%
      \makebox[10em][l]{4.\:â˜\,æ™®é€šæ•™æ\quad5.\:â˜\,å…¶ä»–\underline{\hspace{4em}}\quad6.\:â˜\,æ— }}&&\\
  \end{tblr}\par\vspace*{-2pt}%
  \noindent%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{tblr}{colspec={cX[l]}, vlines, hline{2-Z},%
      rows={m}, rowsep=.28\baselineskip,%
      cell{4}{2}={f},%
    }
    {é¦–æ¬¡é€‰\\ç”¨ä¾æ®\\/\\å†æ¬¡é€‰\\ç”¨ä½¿ç”¨\\æ•ˆæœè¯„\\ä»·æ„è§}&%
    {\ttfamily\SWFU@BookWhy}\par
    \vspace*{15mm}
    \hfill{}%
    è¯¾ç¨‹è´Ÿè´£äººç­¾å­—ï¼š\;\makebox[3cm][l]{\SWFU@TeacherSig}%
    æ•™ç ”å®¤ï¼ˆç³»ï¼‰ä¸»ä»»ç­¾å­—ï¼š\;\makebox[25mm][l]{\SWFU@DeptSig}\par\medskip%
    \hfill {\SWFU@TeacherSigYear}%
    \makebox[9em][s]{å¹´{\SWFU@TeacherSigMonth}æœˆ{\SWFU@TeacherSigDay}æ—¥}%
    \hspace{8em} {\SWFU@DeptSigYear}%
    \makebox[9em][s]{å¹´{\SWFU@DeptSigMonth}æœˆ{\SWFU@DeptSigDay}æ—¥}\\%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
    {æ•™å­¦\\ç§‘ç ”\\å•ä½\\å®¡æ ¸\\æ„è§}&%
    {\;\par%
      æ•™æé€‰ç”¨å®¡æ ¸ä¸“å®¶åå•ï¼ˆä¸å°‘äº3äººï¼‰ï¼š\par\bigskip
      æ•™æé€‰ç”¨å®¡æ ¸æ„è§ï¼š\quad â˜åŒæ„é€‰ç”¨\qquad â˜ä¸åŒæ„é€‰ç”¨\par\bigskip
      \makebox[.9\linewidth][l]{%
        ä¸“å®¶ç»„ç»„é•¿ç­¾å­—ï¼š\hspace{25mm}%
        å­¦é™¢å…šå§”ä¹¦è®°ç­¾å­—ï¼ˆé™¢å…šå§”ç« ï¼‰ï¼š\hspace{2cm}%
      }\par\medskip\hfill%
      \makebox[9em][s]{å¹´æœˆæ—¥}\hspace{8em}\makebox[9em][s]{å¹´æœˆæ—¥}%
    }\\%
    {å…¬ç¤ºæœŸ}&\\%
    {å­¦æ ¡æ•™\\æå·¥ä½œ\\å§”å‘˜ä¼š\\æ„è§}&%    
    \hfill\makebox[9em][s]{å¹´æœˆæ—¥}\\%
  \end{tblr}\par
  \noindent%
  {\ttfamily%
    æ³¨ï¼š{\bfseries â€œé©¬å·¥ç¨‹â€é‡ç‚¹æ•™æåŠå›½å®¶ç»Ÿç¼–æ•™æ}å¯ç›´æ¥é€šè¿‡æ•™å­¦å•ä½å®¡æ ¸ç¯èŠ‚è¿›è¡Œå…¬ç¤ºã€‚}
}
