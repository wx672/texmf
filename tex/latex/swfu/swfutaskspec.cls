% è¥¿å—æ—ä¸šå¤§å­¦æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä»»åŠ¡ä¹¦ï¼ŒåŠå®ä¹ è®¡åˆ’è¡¨ï¼ˆå­¦ç”Ÿå¡«å†™ï¼‰
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{swfutaskspec}%2019

\RequirePackage{pgfkeys}

\pgfkeys{%
  Prjtitle/.store in        = \SWFU@Prjtitle,%
  PrjFrmA/.store in         = \SWFU@PrjFrmA,  PrjFrmA={\unchecked{}},  %ç§‘ç ”é¡¹ç›®
  PrjFrmB/.store in         = \SWFU@PrjFrmB,  PrjFrmB={\unchecked{}},  %ç¤¾ä¼šå®è·µ
  PrjFrmC/.store in         = \SWFU@PrjFrmC,  PrjFrmC={\unchecked{}},  %å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šé¡¹ç›®
  PrjFrmD/.store in         = \SWFU@PrjFrmD,  PrjFrmD={\unchecked{}},  %å…¶å®ƒ
  PrjTypeA/.store in        = \SWFU@PrjTypeA, PrjTypeA={\unchecked{}}, %æ¯•ä¸šè®ºæ–‡
  PrjTypeB/.store in        = \SWFU@PrjTypeB, PrjTypeB={\checked{}},   %æ¯•ä¸šè®¾è®¡
  Signature/.store in       = \SWFU@Signature,%
  StudSignature/.store in   = \SWFU@StudSignature,%
  Signature                 = {\includegraphics[width=2cm]{signature}},%
  StudSignature             = {\includegraphics[width=2cm]{signature}},%
  Studname/.store in        = \SWFU@Studname,%å­¦ç”Ÿå§“å
  Studid/.store in          = \SWFU@Studid,  %å­¦å·
  Subject/.store in         = \SWFU@Subject, %ä¸“ä¸š
  Prjwhy/.store in          = \SWFU@Prjwhy, %é€‰é¢˜çš„ç›®çš„åŠæ„ä¹‰
  Prjwhat/.store in         = \SWFU@Prjwhat,%å­¦ç”Ÿä»»åŠ¡åŠè¦æ±‚
  Prjwhen/.store in         = \SWFU@Prjwhen,%è¿›åº¦å®‰æ’
  Prjbib/.store in          = \SWFU@Prjbib, %å‚è€ƒæ–‡çŒ®
  Gyear/.store in           = \SWFU@Gyear,%å±Š
  Year/.store in            = \SWFU@Year, %ç­¾å­—æ—¥æœŸï¼ˆå¹´ï¼‰
  Month/.store in           = \SWFU@Month,%ç­¾å­—æ—¥æœŸï¼ˆæœˆï¼‰
  Date/.store in            = \SWFU@Date, %ç­¾å­—æ—¥æœŸï¼ˆæ—¥ï¼‰
  School/.store in          = \SWFU@School, School={å¤§æ•°æ®ä¸æ™ºèƒ½å·¥ç¨‹å­¦é™¢},%
  Plan/.store in            = \SWFU@Plan, %è®ºæ–‡å·¥ä½œè®¡åˆ’å’Œé¢„æœŸç›®æ ‡æ‘˜è¦ï¼ˆå®ä¹ è®¡åˆ’è¡¨ï¼‰
  Advisor/.store in         =\SWFU@Advisor,                           % å¯¼å¸ˆå§“å1
  AdvisorTitle/.store in    =\SWFU@AdvisorTitle,                      % èŒç§°1
  Advisortwo/.store in      =\SWFU@Advisortwo, Advisortwo=,           % å¯¼å¸ˆå§“å2
  AdvisorTitletwo/.store in =\SWFU@AdvisorTitletwo, AdvisorTitletwo=, % èŒç§°2
}

\newcommand{\swfusetup}[1]{\pgfkeys{#1}}

\LoadClass[scheme=chinese]{ctexart}

\RequirePackage{graphicx}
\RequirePackage[%showframe,
paperwidth=195mm,paperheight=270mm,
top=2.5cm,bottom=2cm,
left=2cm,right=2cm
]{geometry}

\RequirePackage[backend=biber,style=gb7714-2015,gbpub=false,gbtype=false,gbpunctin=false,url=false,doi=false,isbn=false]{biblatex}

\newfontfamily\dejavu{DejaVu Sans Mono}
\newcommand\unchecked{{\dejavu â–¡}}%ballot box
\newcommand\checked{{\large\dejavu â˜‘}} %ğŸ—¹

\RequirePackage{enumitem} % \setlist
\setlist{itemsep=-.5ex}
%\setlist{nosep} % kills all vertical spacing

\RequirePackage{tabularx,makecell}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}} % for centering p column
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}} % for centering p column
\newcolumntype{C}{>{\centering\arraybackslash}X}
\renewcommand{\arraystretch}{1.5}

\newcommand{\maketaskspec}{%
  \pagestyle{plain}
  {\centering%
    {\heiti\Large è¥¿å—æ—ä¸šå¤§å­¦\SWFU@Gyear{}å±Šæœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä»»åŠ¡ä¹¦}\\[3ex]%
    \begin{tabularx}{\textwidth}{|>{\bfseries}M{6em}|>{\kaishu}C|}%
      \hline%
      è®ºæ–‡ï¼ˆè®¾è®¡ï¼‰\par{}é¢˜ç›®&\SWFU@Prjtitle\\\hline%
    \end{tabularx}\\[-1pt]
    \begin{tabularx}{\textwidth}%
      {|>{\bfseries}M{6em}|>{\kaishu}C|>{\bfseries}c|C|>{\bfseries}c|>{\kaishu}C|}%
      å­¦ç”Ÿå§“å&\SWFU@Studname& å­¦å·&\SWFU@Studid& ä¸“ä¸š&\SWFU@Subject\\\hline%
    \end{tabularx}\\[-1pt]
    \begin{tabularx}{\textwidth}{|>{\bfseries}M{6em}|>{\kaishu}X|>{\bfseries}M{6em}|>{\kaishu}C|}%
      é¢˜ç›®æ¥æº&%
      \begin{minipage}[c]{\linewidth}%
        \SWFU@PrjFrmA{}ç§‘ç ”é¡¹ç›®\par%
        \SWFU@PrjFrmB{}ç¤¾ä¼šå®è·µ\par%
        \SWFU@PrjFrmC{}å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šé¡¹ç›®\par%
        \SWFU@PrjFrmD{}å…¶å®ƒ%
      \end{minipage}&%      
      é¢˜ç›®ç±»åˆ«&\SWFU@PrjTypeA{}æ¯•ä¸šè®ºæ–‡\qquad{}\SWFU@PrjTypeB{}æ¯•ä¸šè®¾è®¡\\%
    \end{tabularx}\\[-1pt]%
    \begin{tabularx}{\textwidth}{|>{\bfseries}m{1em}|>{\kaishu}X|}\hline
      é€‰é¢˜çš„ç›®çš„åŠæ„ä¹‰&%
      \begin{minipage}[c][22em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjwhy
      \end{minipage}\\\hline
      å­¦ç”Ÿä»»åŠ¡åŠè¦æ±‚&%
      \begin{minipage}[c][22em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjwhat
      \end{minipage}\\\hline
    \end{tabularx}\clearpage
    \begin{tabularx}{\textwidth}{|>{\bfseries}m{1em}|>{\kaishu}X|}\hline
      è¿›åº¦å®‰æ’&%
      \begin{minipage}[c][20em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjwhen
      \end{minipage}\\\hline
      å‚è€ƒæ–‡çŒ®&%
      \begin{minipage}[c][15em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjbib  
      \end{minipage}\\\hline
    \end{tabularx}
    \begin{tabularx}{\textwidth}{|>{\bfseries}c|X|>{\bfseries}c|X|}%
      ä»»åŠ¡ä¸‹è¾¾æ—¥æœŸ&&\makecell{å­¦ç”Ÿåº”é€äº¤æ¯•ä¸šè®ºæ–‡\\ï¼ˆè®¾è®¡ï¼‰æ—¥æœŸ}&\\\hline%
    \end{tabularx}\\[-1pt]%
    {\bfseries%
      \begin{tabularx}{\textwidth}{|c|X|c|X|}%
        \parbox{4em}{\centering æŒ‡å¯¼æ•™å¸ˆç­¾å­—}
        &\begin{minipage}[c][6em]{1.0\linewidth}%
          \makebox[7em][r]{\SWFU@Signature}\par%
          \hfill\SWFU@Year{}å¹´\SWFU@Month{}æœˆ\SWFU@Date{}æ—¥%
        \end{minipage}%
        &\parbox{4em}{\centering æ¥å—ä»»åŠ¡å­¦ç”Ÿç­¾å­—}
        &\begin{minipage}[c][6em]{1.0\linewidth}%
          \makebox[7em][r]{\SWFU@StudSignature}\par%
          \hfill\SWFU@Year{}å¹´\SWFU@Month{}æœˆ\SWFU@Date{}æ—¥%
        \end{minipage}\\\hline%
        \parbox{3em}{\centering æ•™ç ”å®¤å®¡æ ¸}& \begin{minipage}[c][8em]{1.0\linewidth}%
          \par\vspace{1ex}%
          å®¡æ ¸æ„è§ï¼š\par\vspace{\fill}%
          ç­¾å­—ï¼š\par%
          \hfill{}å¹´\qquad{}æœˆ\qquad{}æ—¥%
        \end{minipage}&%
        \parbox{4.3em}{\centering å­¦é™¢å®¡æ ¸}& \begin{minipage}[c][8em]{1.0\linewidth}%
          \par\vspace{1ex}%
          å®¡æ ¸æ„è§ï¼š\par\vspace{\fill}%
          ç­¾ç« ï¼š\par%
          \hfill\qquad{}å¹´\qquad{}æœˆ\qquad{}æ—¥%
        \end{minipage}\\\hline%
      \end{tabularx}}\\%
    \begin{tabularx}{\textwidth}{@{}c@{\,\,}c@{\,}X@{}}
      æ³¨ï¼š%
      &1.&æ­¤ä»»åŠ¡ä¹¦ç”±æŒ‡å¯¼æ•™å¸ˆå¡«å†™ï¼Œå„é™¢å®¡å®šï¼Œåœ¨æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰å¼€å§‹å‰ä¸€å‘¨å†…å¡«å¥½å¹¶å‘ç»™å­¦ç”Ÿã€‚\\
      &2.&æ­¤ä»»åŠ¡ä¹¦åŒé¢æ‰“å°ï¼Œä¸€å¼ä¸¤ä»½ã€‚å­¦ç”Ÿä¸€ä»½ï¼Œå¦ä¸€ä»½éšæ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä¿å­˜ã€‚
    \end{tabularx}}}

\newcommand\makeplan{%
  \pagestyle{plain}
  {\centering\heiti\Large è¥¿å—æ—ä¸šå¤§å­¦\SWFU@Gyear{}å±Šæœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰å®ä¹ è®¡åˆ’è¡¨\par}
  \bigskip
  \hfillï¼ˆæœ¬è¡¨ç”±æ¯•ä¸šç”Ÿå¡«å†™ï¼‰\par
  {\centering
    \begin{tabularx}{1.0\linewidth}{|>{\bfseries}c|C|}
      \hline
      è®ºæ–‡ï¼ˆè®¾è®¡ï¼‰é¢˜ç›®&\SWFU@Prjtitle\\\hline
    \end{tabularx}
    \vskip -1pt
    \begin{tabularx}{1.0\linewidth}{|*{2}{>{\bfseries}c|C|}}
      \makecell{é¢˜ç›®\\ç±»åˆ«}%
      &\SWFU@PrjTypeA{}æ¯•ä¸šè®ºæ–‡\qquad\SWFU@PrjTypeB{}æ¯•ä¸šè®¾è®¡%
      &\makecell{é¢˜ç›®\\æ¥æº}%
      &\makecell[l]{%
        \SWFU@PrjFrmA{}ç§‘ç ”é¡¹ç›®\quad\SWFU@PrjFrmB{}ç¤¾ä¼šå®è·µ\quad\SWFU@PrjFrmD{}å…¶å®ƒæ¥æº\\
      \SWFU@PrjFrmC{}å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šé¡¹ç›®}\\\hline
    \end{tabularx}
    \vskip -1pt
    \begin{tabularx}{1.0\linewidth}{|*{2}{>{\bfseries}r|C|}}
      æŒ‡å¯¼æ•™å¸ˆ&\SWFU@Advisor&èŒç§°&\SWFU@AdvisorTitle\\\hline
      è¾…åŠ©æŒ‡å¯¼æ•™å¸ˆ&\SWFU@Advisortwo&èŒç§°&\SWFU@AdvisorTitletwo\\\hline
    \end{tabularx}
    \vskip -1pt
    \begin{tabularx}{1.0\linewidth}{|*{3}{>{\bfseries}c|C|}}
      å­¦ç”Ÿå§“å&\SWFU@Studname&ä¸“ä¸š&\SWFU@Subject&å­¦å·&\SWFU@Studid\\\hline
    \end{tabularx}
    \vskip -1pt
    \begin{tabularx}{1.0\linewidth}{|>{\bfseries}c|C|}
      æ‰€å±å­¦é™¢&\SWFU@School\\\hline
    \end{tabularx}
    \vskip -1pt
    \begin{tabularx}{1.0\linewidth}{|X|}
      è®ºæ–‡å·¥ä½œè®¡åˆ’å’Œé¢„æœŸç›®æ ‡æ‘˜è¦ï¼š\\
      \begin{minipage}[t][35em]{1.0\linewidth}
        \qquad{}\SWFU@Plan
      \end{minipage}\\\hline
    \end{tabularx}
    {\heiti æ³¨ï¼š}æ¯ä½æ¯•ä¸šç”Ÿé¡»å¡«å†™ä¸€ä»½ï¼›å¦‚è¡¨æ ä¸å¤Ÿå¡«å†™ï¼Œè¯·åŠ é™„é¡µã€‚
  }}
