% è¥¿å—æ—ä¸šå¤§å­¦æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä»»åŠ¡ä¹¦
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{swfutaskspec}

\RequirePackage{ifxetex} % XeTeX only

\RequirePackage{pgfkeys}

\pgfkeys{%
  Prjtitle/.store in      = \SWFU@Prjtitle,%
  Signature/.store in     = \SWFU@Signature,%
  StudSignature/.store in = \SWFU@StudSignature,%
  Studname/.store in      = \SWFU@Studname,%
  Studid/.store in        = \SWFU@Studid,%
  Studclass/.store in     = \SWFU@Studclass,%
  Prjwhy/.store in        = \SWFU@Prjwhy,%
  Prjwhat/.store in       = \SWFU@Prjwhat,%
  Prjwhen/.store in       = \SWFU@Prjwhen,%
  Prjbib/.store in        = \SWFU@Prjbib,%
  Gyear/.store in         = \SWFU@Gyear,%
  Year/.store in          = \SWFU@Year,%
  Month/.store in         = \SWFU@Month,%
  Date/.store in          = \SWFU@Date,%
}

\newcommand{\swfusetup}[1]{\pgfkeys{#1}}

\LoadClass[scheme=plain]{ctexart}

\RequirePackage{tabu,longtable}
\RequirePackage{graphicx}
\RequirePackage[%showframe,
paperwidth=195mm,paperheight=270mm,
top=2.5cm,bottom=2cm,
left=2cm,right=2cm
]{geometry}

\RequirePackage[backend=biber,style=gb7714-2015,gbpub=false,gbtype=false,gbpunctin=false,url=false,doi=false,isbn=false]{biblatex}

\RequirePackage{wx672hyperref}

\newfontfamily\dejavu{DejaVu Sans Mono}
\newcommand\unchecked{\dejavu â–¡}%ballot box
\newcommand\checked{\large\dejavu â˜‘} %ğŸ—¹

\newcommand{\makeform}{\pagestyle{plain}
  {\centering%
    {\heiti\large è¥¿å—æ—ä¸šå¤§å­¦\SWFU@Gyear{}å±Šæ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä»»åŠ¡ä¹¦}\\[3ex]%
    \tabulinesep=3pt%
    \begin{tabu}{|>{\bfseries}c|>{\kaishu}X[c]|}%
      \tabucline-%
      è®ºæ–‡ï¼ˆè®¾è®¡ï¼‰é¢˜ç›®&\SWFU@Prjtitle\\\tabucline-%
    \end{tabu}\vspace{-1pt}%
    \begin{tabu}{|>{\bfseries}c|>{\kaishu}X[c]|>{\bfseries}c|X[c]|>{\bfseries}c|>{\kaishu}X[c]|}%
      å­¦ç”Ÿå§“å&\SWFU@Studname&%
      å­¦å·&\SWFU@Studid&%
      ä¸“ä¸šç­çº§&\SWFU@Studclass\\\tabucline-%
    \end{tabu}\vspace{-1pt}%
    \begin{tabu}{|>{\bfseries}m{4em}|>{\kaishu}X|>{\bfseries}m{4em}|>{\kaishu}X[c]|}%
      é¢˜ç›®æ¥æº&%
      \begin{minipage}[c]{\linewidth}%
        \unchecked{}å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šé¡¹ç›®\par%
        \unchecked{}ç§‘ç ”\quad\unchecked{}ç¤¾ä¼šå®è·µ\quad{}{\large\checked}å…¶å®ƒ%
      \end{minipage}&%      
      é¢˜ç›®ç±»åˆ«&\unchecked{}è®ºæ–‡\qquad{}{\large\checked}è®¾è®¡\\%
    \end{tabu}\vspace{-1pt}%
    \begin{tabu}{|>{\bfseries}m{1em}|>{\kaishu}X|}\tabucline-
      é€‰é¢˜çš„ç›®çš„åŠæ„ä¹‰& \begin{minipage}[c][25em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjwhy  
      \end{minipage}\\\tabucline-
      å­¦ç”Ÿä»»åŠ¡åŠè¦æ±‚& \begin{minipage}[c][25em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjwhat  
      \end{minipage}\\\tabucline-
    \end{tabu}\clearpage
    \begin{tabu}{|>{\bfseries}m{1em}|>{\kaishu}X|}\tabucline-
      è¿›åº¦å®‰æ’& \begin{minipage}[c][20em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjwhen
      \end{minipage}\\\tabucline-
      å‚è€ƒæ–‡çŒ®& \begin{minipage}[c][15em][t]{.9\columnwidth}
        \par\vspace{1em}\SWFU@Prjbib  
      \end{minipage}\\\tabucline-      
    \end{tabu}
    \begin{tabu}{|>{\bfseries}c|X|>{\bfseries}c|X|}%
      ä»»åŠ¡ä¸‹è¾¾æ—¥æœŸ&&\parbox{9em}{\centering å­¦ç”Ÿåº”é€äº¤æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰æ—¥æœŸ}&\\\tabucline-%
    \end{tabu}%
    \vspace{-1pt}%\tabulinesep=2pt%
    {\bfseries%
      \begin{tabu}{|c|X|c|X|}%
        \parbox{4em}{\centering æŒ‡å¯¼æ•™å¸ˆç­¾å­—}& \begin{minipage}[c][6em]{1.0\linewidth}%
          \makebox[7em][r]{\SWFU@Signature}\par%
          \hfill\SWFU@Year{}å¹´\SWFU@Month{}æœˆ\SWFU@Date{}æ—¥%
        \end{minipage}&%%
        \parbox{4em}{\centering æ¥å—ä»»åŠ¡å­¦ç”Ÿç­¾å­—}& \begin{minipage}[c][6em]{1.0\linewidth}%
          \par\vspace{\fill}
          \hfill\SWFU@Year{}å¹´\SWFU@Month{}æœˆ\SWFU@Date{}æ—¥%
        \end{minipage}\\\tabucline-%
        \parbox{3em}{\centering æ•™ç ”å®¤å®¡æ ¸}& \begin{minipage}[c][8em]{1.0\linewidth}%
          \par\vspace{1ex}%
          å®¡æ ¸æ„è§ï¼š\par\vspace{\fill}%
          ç­¾å­—ï¼š\par%
          \hfill\SWFU@Year{}å¹´\SWFU@Month{}æœˆ\SWFU@Date{}æ—¥%
        \end{minipage}&%
        \parbox{4.3em}{\centering å­¦é™¢(éƒ¨)å®¡æ ¸}& \begin{minipage}[c][8em]{1.0\linewidth}%
          \par\vspace{1ex}%
          å®¡æ ¸æ„è§ï¼š\par\vspace{\fill}%
          ç­¾ç« ï¼š\par%
          \hfill\SWFU@Year{}å¹´\SWFU@Month{}æœˆ\SWFU@Date{}æ—¥%
        \end{minipage}\\\tabucline-%
      \end{tabu}}%
    % \noindent\tabulinesep=3pt
    \begin{tabu}{@{}c@{\quad}c@{\,}X@{}}
      æ³¨ï¼š%
      &1.&æ­¤ä»»åŠ¡ä¹¦ç”±æŒ‡å¯¼æ•™å¸ˆå¡«å†™ï¼Œå„é™¢ï¼ˆéƒ¨ï¼‰å®¡å®šï¼Œåœ¨æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰å¼€å§‹å‰ä¸€å‘¨å†…å¡«å¥½å¹¶å‘ç»™å­¦ç”Ÿã€‚\\
      &2.&æ­¤ä»»åŠ¡ä¹¦åŒé¢æ‰“å°ï¼Œä¸€å¼ä¸¤ä»½ã€‚å­¦ç”Ÿä¸€ä»½ï¼Œå¦ä¸€ä»½éšæ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä¿å­˜ã€‚
    \end{tabu}}}
