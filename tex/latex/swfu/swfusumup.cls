% è¥¿å—æ—ä¸šå¤§å­¦è¯¾ç¨‹æ•™å­¦å°ç»“è¡¨
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{swfusumup}


\RequirePackage{ifxetex} % XeTeX only

\RequirePackage{pgfkeys}

\pgfkeys{
  Term/.store in         = \SWFU@Term,%
  Coursetitle/.store in  = \SWFU@Coursetitle,%
  Totaltime/.store in    = \SWFU@Totaltime,%
  Labtime/.store in      = \SWFU@Labtime,%
  Practicetime/.store in = \SWFU@Practicetime,%
  Class/.store in        = \SWFU@Class,%
  Studnum/.store in      = \SWFU@Studnum,%
  Examtype/.store in     = \SWFU@Examtype,%
  Textbook/.store in     = \SWFU@Textbook,%
  % Publishtime/.store in  = \SWFU@Publishtime,%
  Sumup/.store in        = \SWFU@Sumup,%
  Suggestion/.store in   = \SWFU@Suggestion,%
  Date/.store in         = \SWFU@Date,%
  School/.store in       = \SWFU@School,       School       = å¤§æ•°æ®ä¸æ™ºèƒ½å·¥ç¨‹å­¦é™¢,%
  TeacherName/.store in  = \SWFU@TeacherName,  TeacherName  = ç‹æ™“æ—,%
  TeacherTitle/.store in = \SWFU@TeacherTitle, TeacherTitle = è®²å¸ˆ,%
  Multimedia/.store in   = \SWFU@Multimedia,   Multimedia   = \YES,%
  Bilingual/.store in    = \SWFU@Bilingual,    Bilingual    = \YES,%
}
\newcommand{\swfusetup}[1]{\pgfkeys{#1}}

\DeclareOption*{\PassOptionsToClass{\CurrentOption}{ctexart}}
\ProcessOptions\relax

\LoadClass[scheme=plain]{ctexart}

\RequirePackage[backend=biber,style=gb7714-2015,gbpub=false,gbtype=false,gbpunctin=false,url=false,doi=false,isbn=false]{biblatex}
\renewcommand*{\bibfont}{\scriptsize}

\RequirePackage{tabu,array}
\RequirePackage{graphicx}

\RequirePackage[%showframe,
paperwidth=195mm, paperheight=270mm,
top=2cm, bottom=2cm,
left=2.5cm, right=2.5cm,
]{geometry}

\RequirePackage{tikz}
\usetikzlibrary{backgrounds,positioning,fit}

\newcommand{\Signit}[3]{%\Signit{-3cm}{-6.2cm}{../signature}
\begin{tikzpicture}[overlay,remember picture]%
  \node [xshift=#1,yshift=#2] at (current page.center) {%
    \includegraphics[scale=.1]{#3}%
  };%
\end{tikzpicture}}

\newfontfamily\dejavu{DejaVu Sans Mono}
\newcommand\unchecked{\dejavu â–¡}%ballot box
\newcommand\checked{\large\dejavu â˜‘} %ğŸ—¹

\newcommand{\YES}{{\Large\checked}æ˜¯\quad\unchecked{}å¦}
\newcommand{\NO}{\unchecked{}æ˜¯\quad{\Large\checked}å¦}

\newcommand{\makeform}{
  {\centering%
    {\LARGE\heiti è¥¿å—æ—ä¸šå¤§å­¦è¯¾ç¨‹æ•™å­¦å°ç»“è¡¨}\\[2ex]%
    \tabulinesep=2mm%
    \begin{tabu}{|c|X[c]|c|c|c|c|}%
      \tabucline-%
      æˆè¯¾å­¦æœŸ&\SWFU@Term{}&è¯¾ç¨‹åç§°&\multicolumn{3}{c|}{{\kaishu \SWFU@Coursetitle}}\\\tabucline-%
      æ€»\hspace{.5em}å­¦\hspace{.5em}æ—¶&\SWFU@Totaltime&å®éªŒå­¦æ—¶&\SWFU@Labtime&%
      å®ä¹ å¤©æ•°&\SWFU@Practicetime\\\tabucline-%
      å¼€è¯¾é™¢ç³»&{\kaishu \SWFU@School}&æˆè¯¾ç­çº§&{\kaishu \SWFU@Class}&%
      å­¦ç”Ÿäººæ•°&\SWFU@Studnum\\\tabucline-%
      å¤šåª’ä½“æ•™å­¦&{\kaishu \SWFU@Multimedia}&åŒè¯­æ•™å­¦&{\kaishu \SWFU@Bilingual}&%
      è€ƒæ ¸æ–¹å¼&{\kaishu \SWFU@Examtype}\\\tabucline-%
      æ‰€ç”¨æ•™æ&\multicolumn{5}{l|}{\,\SWFU@Textbook}\\\tabucline-%
    \end{tabu}%
    \vspace{-1pt}%
    \begin{tabu}{|p{1em}|X[m]|}%X[.1,c]
      % è¯¾ç¨‹\par\vspace{4ex}æ•™å­¦\par\vspace{4ex}æ€»ç»“\par&%
      \begin{minipage}{1em}
        \vspace{2em}è¯¾\par\vspace{1ex}ç¨‹\par\vspace{1ex}æ•™\par\vspace{1ex}
        å­¦\par\vspace{1ex}æ€»\par\vspace{1ex}ç»“\vspace{2em}
      \end{minipage}&%
      \begin{minipage}{\columnwidth}%
        {\kaishu \SWFU@Sumup}%
      \end{minipage}\\\tabucline-%
      % \vspace{1cm}ä»Šå\par\vspace{4ex}æ”¹é©\par\vspace{4ex}è®¾æƒ³\par\vspace{3cm}&%
      \begin{minipage}{1em}
        \vspace{2em}ä»Š\par\vspace{1ex}å\par\vspace{1ex}æ”¹\par\vspace{1ex}
        é©\par\vspace{1ex}è®¾\par\vspace{1ex}æƒ³\vspace{2em}
      \end{minipage}&%
      \begin{minipage}{.8\columnwidth}%
        {\kaishu \SWFU@Suggestion}%
      \end{minipage}\\\tabucline-%
    \end{tabu}%
    \vspace{-1pt}%
    \tabulinesep=2mm%
    \begin{tabu}{|c|X[c]|c|X[c]|}%
      å¡«æŠ¥äºº&{\kaishu \SWFU@TeacherName}&èŒç§°&{\kaishu \SWFU@TeacherTitle}\\\tabucline-%
    \end{tabu}
    \vspace{-1pt}%
    \begin{tabu}{|X|}%
      å¡«æŠ¥æ—¥æœŸï¼š\quad\SWFU@Date\hfill{}ï¼ˆä»¥ä¸Šä¸ºæˆè¯¾æ•™å¸ˆå¡«å†™ï¼‰\\\tabucline-%
      æ•™ç ”å®¤è´Ÿè´£äººå®¡é˜…æ„è§ï¼š\\[5ex]%
      \hfill{}\makebox[10em][l]{ç­¾åï¼š}%
      \makebox[5em][r]{å¹´}\makebox[3em][r]{æœˆ}\makebox[3em][r]{æ—¥}\\\tabucline-%
    \end{tabu}%
    æ³¨ï¼šæœ¬è¡¨å¤åˆ¶æœ‰æ•ˆ}}

\setlength{\parindent}{2em}

\pagestyle{empty}