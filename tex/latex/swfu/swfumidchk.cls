% è¥¿å—æ—ä¸šå¤§å­¦æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä¸­æœŸæ£€æŸ¥è¡¨
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{swfumidchk}

\RequirePackage{pgfkeys}

\newcommand{\Studclass}[1]{\gdef\SWFCField@Studclass{\kaishu #1}} % å­¦ç”Ÿç­çº§

\pgfkeys{
  Studname/.store in        = \SWFU@Studname,%å­¦ç”Ÿå§“å
  Studid/.store in          = \SWFU@Studid,%å­¦ç”Ÿå­¦å·
  Subject/.store in         = \SWFU@Subject,%ä¸“ä¸š
  AdvisorName/.store in     = \SWFU@AdvisorName,%æŒ‡å¯¼æ•™å¸ˆ  
  Prjtitle/.store in        = \SWFU@Prjtitle,%è®ºæ–‡é¢˜ç›®
  Prjdone/.store in         = \SWFU@Prjdone,%ç›®å‰å·²å®Œæˆä»»åŠ¡
  Prjtodo/.store in         = \SWFU@Prjtodo,%å°šéœ€å®Œæˆçš„ä»»åŠ¡
  Prjproblem/.store in      = \SWFU@Prjproblem,%å­˜åœ¨çš„é—®é¢˜å’Œè§£å†³åŠæ³•
  AdvisorComments/.store in = \SWFU@AdvisorComments,%
  AdvisorComments={è¿›åº¦ç¬¦åˆè¦æ±‚ï¼ŒæŠ“ç´§å®Œæˆè®ºæ–‡ã€‚},%æŒ‡å¯¼æ•™å¸ˆè¯„è¯­
  Signature/.store in       = \SWFU@Signature,%
  Signature={\includegraphics[width=25mm]{signature}},%æŒ‡å¯¼æ•™å¸ˆç­¾å
  Year/.store in            = \SWFU@Year,%
  Month/.store in           = \SWFU@Month,%
  Date/.store in            = \SWFU@Date,%
}

\newcommand{\swfusetup}[1]{\pgfkeys{#1}}

\LoadClass[scheme=chinese]{ctexart}

\RequirePackage[ % showframe,
paperwidth=195mm,paperheight=270mm,
top=25mm,bottom=20mm,
left=20mm,right=20mm
]{geometry}

\RequirePackage{tabularx,makecell,array,graphicx}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}} % for centering p column
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}} % for centering p column
\newcolumntype{C}{>{\centering\arraybackslash}X}
%\renewcommand{\arraystretch}{1.2}

\RequirePackage{enumitem} % \setlist
\setlist{itemsep=-.5ex}
%\setlist{nosep} % kills all vertical spacing

\setlength{\parindent}{0pt}

\newfontfamily\dejavu{DejaVu Sans Mono}
\newcommand\unchecked{\dejavu â–¡}%ballot box
\newcommand\checked{\large\dejavu â˜‘} %ğŸ—¹

\newcommand{\makeform}{\pagestyle{empty}%
  {\centering\Large\heiti è¥¿å—æ—ä¸šå¤§å­¦æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä¸­æœŸæ£€æŸ¥è¡¨\par}
  \medskip
  \begin{tabularx}{\linewidth}{|c|C|c|C|}\hline
    å­¦ç”Ÿå§“å&\SWFU@Studid&å­¦ç”Ÿå­¦å·&\SWFU@Studname\\\hline
    ä¸“\quad{}ä¸š&\SWFU@Subject&æŒ‡å¯¼æ•™å¸ˆ&\SWFU@AdvisorName\\\hline
  \end{tabularx}\vspace{-1pt}
  \begin{tabularx}{\linewidth}{|M{4em}|X|}
    è®ºæ–‡é¢˜ç›®%
    &\makecell[c]{\SWFU@Prjtitle}\\\hline
    \makecell{ç›®å‰å·²å®Œ\\æˆä»»åŠ¡}%
    &\begin{minipage}[c]{1.0\linewidth}
      \SWFU@Prjdone
    \end{minipage}\\[-1em]
    &\hfill{}æ˜¯å¦ç¬¦åˆè®¡åˆ’è¿›åº¦ï¼Ÿ\checked{}æ˜¯\quad\unchecked{}å¦\\\hline
    \makecell{å°šéœ€å®Œæˆ\\çš„ä»»åŠ¡}%
    &\begin{minipage}[c]{1.0\linewidth}
      \SWFU@Prjtodo
    \end{minipage}\\[-1em]
    &\hfill{}èƒ½å¦æŒ‰æœŸå®Œæˆä»»åŠ¡ï¼Ÿ\checked{}æ˜¯\quad\unchecked{}å¦\\\hline
    \makecell{å­˜åœ¨çš„é—®\\é¢˜å’Œè§£å†³\\åŠæ³•}
    &\begin{minipage}[c]{1.0\linewidth}
      \SWFU@Prjproblem
    \end{minipage}\\\hline
  \end{tabularx}\vspace{-1pt}
  \begin{tabularx}{\linewidth}{|C|} ï¼ˆä»¥ä¸Šéƒ¨åˆ†ç”±å­¦ç”Ÿå¡«å†™ï¼‰\\\hline \end{tabularx}\vspace*{-1.5pt}
  \begin{tabularx}{\linewidth}{|c|X|}
    \hline
    \makecell[t]{æŒ‡\\[-1ex]å¯¼\\[-1ex]æ•™\\[-1ex]å¸ˆ\\[-1ex]è¯„\\[-1ex]è¯­}
    &\begin{minipage}[c]{1.0\linewidth}
      \qquad\SWFU@AdvisorComments
    \end{minipage}\\[-5em]
    &\hfill{}æŒ‡å¯¼æ•™å¸ˆï¼ˆç­¾åï¼‰ï¼š\makebox[5cm][c]{\SWFU@Signature}\par%
    \hfill\SWFU@Year{}å¹´\makebox[2em][c]{\SWFU@Month}æœˆ\makebox[2em][c]{\SWFU@Date}æ—¥\\\hline
  \end{tabularx}\vspace{-1pt}
  \begin{tabularx}{\linewidth}{|C|}
    ï¼ˆä»¥ä¸‹éƒ¨åˆ†ç”±æ•™å­¦é™¢ã€ç³»ã€éƒ¨å¡«å†™ï¼‰\\\hline
  \end{tabularx}
  \vskip -1.5pt%
  \begin{tabularx}{\linewidth}{|X|c|c|C|}\hline
    \makecell[c]{è¯„\, åˆ†\, é¡¹\, ç›®}
    &æœ€é«˜åˆ†å€¼&è¯„åˆ†&å¤‡\, æ³¨\\\hline
    æŒ‡å¯¼æ•™å¸ˆå¯¹æ¯•ä¸šå®ä¹ çš„æŒ‡å¯¼åŠ›åº¦&25&&\\\hline
    æ¯•ä¸šè®ºæ–‡çš„å®éªŒæ¡ä»¶&15&&\\\hline
    æ¯•ä¸šè®ºæ–‡çš„é€‚åˆåº¦&20&&\\\hline
    å®Œæˆè®ºæ–‡çš„è¿›åº¦&15&&\\\hline
    å­¦ç”Ÿè¡¨ç°&25&&\\\hline
    \multicolumn{2}{|c|}{æ€»\qquad{}åˆ†}&
    \multicolumn{2}{c|}{}\\\hline
  \end{tabularx}
  \vskip -1.5pt
  \begin{tabularx}{\linewidth}{|M{1em}|X|M{1em}|X|}
    \hline
    \makecell{æ•™\\[-1ex]ç ”\\[-1ex]å®¤\\[-1ex]æ„\\[-1ex]è§}%
    & \begin{minipage}[c][4cm]{1.0\linewidth}
      \vfill{}
      æ•™ç ”å®¤è´Ÿè´£äººï¼š\par\hfill{}å¹´\qquad{}æœˆ\qquad{}æ—¥%
    \end{minipage}      
    &\makecell{å­¦\\[-1ex]é™¢\\[-1ex]æ„\\[-1ex]è§}%
    & \begin{minipage}[c][4cm]{1.0\linewidth}
      \vfill{}
      å­¦é™¢è´Ÿè´£äººï¼š\par\hfill{}å¹´\qquad{}æœˆ\qquad{}æ—¥
    \end{minipage}\\\hline
  \end{tabularx}}
